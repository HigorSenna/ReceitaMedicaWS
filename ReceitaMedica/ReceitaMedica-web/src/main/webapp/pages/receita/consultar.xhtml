<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	template="../template/template.xhtml">

	<ui:define name="corpoPagina">
		<div id="divCadastroMaterial">
			<p:messages id="message" showDetail="true" closable="true" />

			<h1 style="width: 100%; text-align: center;">Cadastro de Receita Médica</h1>

			<h:form prependId="false" id="formularioConsultaReceitaMedica">
			
				<div>
					<br/>
					
					<div class="form-group row">
						<label for="nomeMedico" class="col-xs-2 col-form-label">Medico</label>
						<div class="col-xs-10">
							<h:inputText class="form-control" value="#{consultaReceitaController.consultaReceitaVM.receita.medico.nmMedico}"
								id="nomeMedico" style="width: 50%;" disabled="true"/>
						</div>
					</div>
					
					<div class="form-group row">
						<label for="nomePaciente" class="col-xs-2 col-form-label">Paciente</label>
						<div class="col-xs-10">
							<h:inputText class="form-control" value="#{consultaReceitaController.consultaReceitaVM.receita.paciente.nmPaciente}"
								id="nomePaciente" style="width: 50%;" maxlength="11" disabled="true"/>
						</div>
					</div>
					
					<div class="form-group row">
						<label for="numeroReceita" class="col-xs-2 col-form-label">Numero Receita</label>
						<div class="col-xs-10">
							<h:inputText class="form-control" value="#{consultaReceitaController.consultaReceitaVM.numReceita}"
								id="numeroReceita" style="width: 50%;" maxlength="11" required="true"/>
						</div>
						
						<p:commandButton class="btn btn-success" value="Utilizar" id="botaoUtilizarReceita" action="#{consultaReceitaController.utilizarReceita()}" update="message"/>
						<p:commandButton class="btn btn-success" value="Cancelar" id="botaoCancelarReceita" action="#{consultaReceitaController.cancelarReceita()}" update="message"/>
					</div>					
				</div>
						<p:commandButton class="btn btn-success" value="Consultar" id="botaoBucarReceita" action="#{consultaReceitaController.buscarReceitaPorNumero()}" update="medicamentos nomePaciente nomeMedico" />
				
				<br/>
				<br/>
				<div class="table table-hover">
					<p:dataTable id="medicamentos" style="margin-bottom:0;margin-top: 5%;margin-left:0%;width:60%;text-align:center;" paginator="true" 
						rows="10" lazy="false" var="item" value="#{consultaReceitaController.consultaReceitaVM.itensReceita}"						
						emptyMessage="Nenhum registro encontrado!!"
						rowsPerPageTemplate="5, 10, 15" paginatorPosition="bottom">
						
						<f:facet name="header">
							Tabela de Medicamentos
						</f:facet>
<!-- 						<p:column headerText="Data da compra"> -->
<!-- 							<h:outputText value=""> -->
<!-- 								<f:convertDateTime pattern="dd/MM/yyyy" locale="pt,BR" /> -->
<!-- 							</h:outputText> -->
<!-- 						</p:column> -->
						<p:column headerText="Instrução">
							<h:outputText value="#{item.instrucao}" />
						</p:column>

						<p:column headerText="Nome da Receita">
							<h:outputText value="#{item.nmReceita}" />
						</p:column>

						<p:column headerText="Uso">
							<h:outputText value="#{item.uso}" />
						</p:column>

						<p:column headerText="Contra-Indicação">
							<h:outputText value="#{item.contraIndicacao}" />
						</p:column>
						
						<p:column headerText="Nº Anvisa">
							<h:outputText value="#{item.regAnvisa}" />
						</p:column>
						
					</p:dataTable>
				</div>
				<div>
				</div>
			</h:form>
		</div>
			
	</ui:define>
</ui:composition>